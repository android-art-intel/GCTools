# GCview
======

GC / open source memory management visualization and monitoring framework.
Licensed under the Apache Software License 2.0

---

## Introduction

GCview is a generic and easily adaptable visualization and monitoring 
framework targeted (but not limited) to memory management systems 
(garbage collectors, malloc/free implementations, hardware caches, etc.).  
A  system can be visualized by mapping its operation, data structures, heap 
layout, and other attributes onto GCView abstractions.

Its roots come from a similar tool known as GCspy. GCview is a new design 
and a completely separate code base.

The GCview core consists of three parts which can be hosted in the same place 
and be easily adopted in the required system:

A) Data Stream Spec - A JSON specification that defines the format of a data stream 
representing the state of the system being monitored over time as mapped onto GCview a
bstractions. The data stream can either be written to a file for future analysis or 
transmitted over the network for online monitoring.

B) Visualizer – A visualizer, written in HTML and JavaScript, that interprets and 
displays the above data stream.

C) Data Tracking Code – C++ code that keeps track of the data needed to monitor a 
particular system after it has been mapped onto GCview abstractions along with 
facilities to export this data in the  appropriate format.

The source also contains a set of example traces. Download the source and open index.html 
in your browser, then load a sample trace to play with GCview.

## Info

The GCview collects and shows Info:

- GC Heap Summary info: like heap capacity, footprint, allocated size and  allocated object count.

- Ros Space detail info : : like capacity, footprint, object count and run related info

- Large Object Space detail Info : like object count and memory maps info.

## Run rules

- Click the index.html in $GCview/html/index.html

- Then click the “Browse” button in web, choose a log file in $GCview/traces directory(these trace files is just for test, you can try this tool by this files)

- Then Click "load" button, then the result will show in web

## Guide for generate trace file

As you known, before analysis you should get the trace file ready. The trace file is generated by ART through profiling module which embedded in ART. In order to get the trace file, you should follow the following steps:

- Get supported ART version at https://github.com/android-art-intel/Nougat, follow intructions to build x86 emulator

- Enable gcview trace feature in target
```bash
adb shell stop
adb shell mkdir /sdcard/gcview
adb shell setprop dalvik.vm.extra-opts "-XX:GCViewProfile\ -XGCViewProfileDir:/sdcard/gcview"
adb shell start
Start profile process
kill -10 <pid>
Stop profile process
kill -10 <pid>
Get trace file in directory /sdcard/gcview
```
